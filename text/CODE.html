<link type="text/css" rel="stylesheet" href="../css/code.css" media="all" />
<div class="included">
    // KODELIFE

    #version 150

    uniform float time;
    uniform vec2 resolution;
    uniform vec2 mouse;

    float PI = 3.1415;

    in VertexData{ vec4 v_position; vec3 v_normal; vec2 v_texcoord; } inData;
    out vec4 fragColor;

    vec2 Tiling(vec2 p){
        float id = .0;
        id += step(1., mod(p.x,2.));
        id += step(1., mod(p.y,2.))*2.;

        p = fract(p)-.5;

        float t = 20.;
        if (id == 0.){
            float a = PI*-.25;
            p *= mat2(cos(a),-sin(a),sin(a),cos(a));
            p.x = abs(p.x);
            p -= time/t;}
        else if (id == 1.){
            float a = PI*-.75;
            p *= mat2(cos(a),-sin(a),sin(a),cos(a));
            p.x = abs(p.x);
            p -= time/t;}
            else if (id == 2.){
            float a = PI*.25;
            p *= mat2(cos(a),-sin(a),sin(a),cos(a));
            p.x = abs(p.x);
            p -= time/t;}
        else if (id == 3.){
            float a = PI*.75;
            p *= mat2(cos(a),-sin(a),sin(a),cos(a));
            p.x = abs(p.x);
            p -= time/t;}
        return p;}

    vec4 Shader(vec2 p, vec2 mouse){
        p *= 5.;
        float a = PI*.25;
        p *= mat2(cos(a),-sin(a),sin(a),cos(a));
        p = Tiling(p);
        float d = abs(sin(p.x*floor(mouse.x)+p.y*7.));
        float m = smoothstep(.2,.21,d);
        return vec4(m);}

    void main(void){
        vec2 uv = (gl_FragCoord.xy-.5*resolution.xy)/resolution.y;
        vec4 col = vec4(0.);

        col = Shader(uv, mouse);

        fragColor = col;}
</div>
