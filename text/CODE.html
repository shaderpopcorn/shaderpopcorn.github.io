<link type="text/css" rel="stylesheet" href="../css/code.css" media="all" />
<div class="included">
    // KODELIFE

    #version 150

    uniform float time;
    uniform vec2 resolution;
    uniform vec2 mouse;

    float PI = 3.1415;

    in VertexData{vec4 v_position;vec3 v_normal;vec2 v_texcoord;} inData;
    out vec4 fragColor;

    vec2 Rot2D(vec2 p, float a){
        p -= .5;
        float s = sin(a), c = cos(a);
        p = mat2(c,-s,s,c)*p;
        p += .5;
        return p;}

    vec2 RotT(vec2 p){
        p *= 2.;
        float id = 0.;
        id += step(1., mod(p.x,2.));
        id += step(1., mod(p.y,2.))*2.;

        vec2 q = fract(p);

        float t = time;
        if (id == 0.) q = Rot2D(q,PI*-2.-t);
        else if(id == 1.) q = Rot2D(q,PI*.5-t);
        else if(id == 2.) q = Rot2D(q,PI*-.5-t);
        else if(id == 3.) q = Rot2D(q,PI-t);
        return q;}

    vec4 Shader(vec2 p, vec2 mouse){
        float a = PI*.25;
        p *= mat2(cos(a),-sin(a),sin(a),cos(a));
        p *= 7.;
        p = RotT(p);
        p.x += mouse.x*2.-1.;
        float m = smoothstep(.1,0.,sin(abs(p.x+p.y)*2.5));
        return vec4(m);}

    void main(void){
        vec2 uv = (gl_FragCoord.xy-.5*resolution.xy)/resolution.y;
        vec4 col = vec4(0.);

        col = Shader(uv, mouse);

        fragColor = col;}
</div>
